{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newObject","post","objectId","delete","concat","put","Filter","_ref","handleChange","react_default","a","createElement","onChange","Results","_ref2","searchResults","removeItem","map","person","key","id","name","number","onClick","PersonForm","_ref3","addNewItem","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","value","type","Notification","_ref4","message","msgType","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","msg","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setSearchResults","_useState9","_useState10","setMessage","useEffect","personService","initialData","App_Filter","e","foundPersons","filter","toLowerCase","includes","target","error","console","log","App_Notification","App_PersonForm","preventDefault","namesOnly","itemToEdit","find","window","confirm","editedItem","objectSpread","dataReturned","catch","setTimeout","App_Results","personToRemove","ReactDOM","render","StrictMode","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.86926622.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (objectId) => {\r\n  const request = axios.delete(`${baseUrl}/${objectId}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (objectId, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${objectId}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, remove, update };\r\n","import { useState, useEffect } from \"react\";\r\nimport React from \"react\";\r\nimport personService from \"./services/persons\";\r\n// I changed later to inline styles instead .css file \r\n//import \"./index.css\";\r\n\r\nconst Filter = ({ handleChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input onChange={handleChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Results = ({ searchResults, removeItem }) => {\r\n  return (\r\n    <div>\r\n      {searchResults.map((person) => (\r\n        <p key={person.id}>\r\n          {person.name} {person.number}{\" \"}\r\n          <button onClick={() => removeItem(person.id)}>delete</button>\r\n        </p>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst PersonForm = ({\r\n  addNewItem,\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addNewItem}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst Notification = ({ message }) => {\r\n  const error = {\r\n    color: 'red',\r\n    background: 'lightgrey',\r\n    fontSize: '20px',\r\n    borderStyle: 'solid',\r\n    borderRadius: '5px',\r\n    padding: '10px',\r\n    marginBottom: '10px'\r\n  };\r\n  const success = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: '20px',\r\n    borderStyle: 'solid',\r\n    borderRadius: '5px',\r\n    padding: '10px',\r\n    marginBottom: '10px'\r\n  };\r\n  if (message.msgType === null) {\r\n    return null;\r\n  } else if (message.msgType === \"success\") {\r\n    return <div style={success}>{message.msg}</div>;\r\n  } else if (message.msgType === \"error\") {\r\n    return <div style={error}>{message.msg}</div>;\r\n  }\r\n};\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [message, setMessage] = useState({ msg: null, msgType: null });\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then((initialData) => {\r\n      setPersons(initialData);\r\n    });\r\n  }, []);\r\n\r\n  const removeItem = (id) => {\r\n    const personToRemove = persons.find((person) => person.id === id);\r\n\r\n    if (window.confirm(\"Do you really want to delete \" + personToRemove.name)) {\r\n      personService\r\n        .remove(id)\r\n        .then()\r\n        .catch(() => {\r\n          setMessage({\r\n            msg: `Information of ${personToRemove.name} has already removed from server`,\r\n            msgType: \"error\",\r\n          });\r\n        });\r\n\r\n      //Reset persons and search results\r\n      setPersons(persons.filter((person) => person.id !== id));\r\n      setSearchResults([]);\r\n\r\n      setTimeout(() => {\r\n        setMessage({ msg: null, msgType: null });\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  //Bloated function handling updating old and creating new\r\n  const addNewItem = (e) => {\r\n    e.preventDefault();\r\n    const namesOnly = persons.map((person) => person.name);\r\n    const itemToEdit = persons.find((person) => person.name === newName);\r\n\r\n    if (\r\n      namesOnly.includes(newName) &&\r\n      window.confirm(\r\n        `${newName} is already in the phonebook, do you want to replace the old number with new one?`\r\n      )\r\n    ) {\r\n      //Update existing\r\n      const editedItem = { ...itemToEdit, number: newNumber };\r\n\r\n      personService.update(itemToEdit.id, editedItem).then((dataReturned) => {\r\n        setPersons(\r\n          persons.map((person) =>\r\n            person.id !== itemToEdit.id ? person : dataReturned\r\n          )\r\n        );\r\n        setMessage({\r\n          msg: `${itemToEdit.name} phone number updated`,\r\n          msgType: \"success\",\r\n        });\r\n      }).catch(() => {\r\n        setMessage({\r\n          msg: `Information of ${newName} has already removed from server`,\r\n          msgType: \"error\",\r\n        })\r\n      });\r\n    } else {\r\n      //Create new\r\n      const nameObject = {\r\n        name: newName,\r\n        number: newNumber,\r\n      };\r\n      personService.create(nameObject).then((dataReturned) => {\r\n        setPersons(persons.concat(dataReturned));\r\n        setMessage({\r\n          msg: `${dataReturned.name} added to the phonebook`,\r\n          msgType: \"success\",\r\n        });\r\n      })\r\n      .catch(error => {\r\n        console.log('the message: ' + `${error.response.data}`);\r\n        setMessage({\r\n          msg: `${error.response.data}`,\r\n          msgType: \"error\"\r\n        })\r\n      });\r\n    }\r\n\r\n    //Reset fields and messages\r\n    setTimeout(() => {\r\n      setMessage({ msg: null, msgType: null });\r\n    }, 5000);\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  const handleNameChange = (e) => {\r\n    setNewName(e.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (e) => {\r\n    setNewNumber(e.target.value);\r\n  };\r\n\r\n  //This throws error after person number is updated\r\n  const handleSearchChange = (e) => {\r\n    try {\r\n      const foundPersons = persons.filter((person) =>\r\n        person.name.toLowerCase().includes(e.target.value)\r\n      );\r\n      setSearchResults(foundPersons);\r\n    } catch (error) {\r\n      console.log(\"=== error App.js [165] === \" + error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Filter handleChange={handleSearchChange} />\r\n      <Notification message={message} />\r\n      <h3>add a new</h3>\r\n      <PersonForm\r\n        addNewItem={addNewItem}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h3>Numbers</h3>\r\n      <Results searchResults={searchResults} removeItem={removeItem} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}